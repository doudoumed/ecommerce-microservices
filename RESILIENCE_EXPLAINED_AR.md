# ุชูุฑูุฑ ุชูููุฐ ุฎุตุงุฆุต ุงูุตููุฏ ูุชุญูู ุงูุฃุฎุทุงุก (Resilience & Fault Tolerance)

ุชู ูู ูุฐู ุงููุฑุญูุฉ ุชุนุฒูุฒ ุงููุธุงู ููููู ุฃูุซุฑ ูุฏุฑุฉ ุนูู ุชุญูู ุงูุฃุฎุทุงุก ูููุน ุชููู ุงููุธุงู ุจุงููุงูู ุนูุฏ ูุดู ุฎุฏูุฉ ูุงุญุฏุฉ (Cascading Failures).

## 1. ูุงุทุน ุงูุฏุงุฆุฑุฉ (Circuit Breaker) ๐
**ุงููุดููุฉ:** ุนูุฏูุง ุชุชููู ุฎุฏูุฉ ุงูุฏูุน (Payment Service)ุ ุชุชุฑุงูู ุงูุทูุจุงุช ูู ุฎุฏูุฉ ุงูุทูุจุงุช (Order Service) ููุง ูุฏ ูุคุฏู ูุงูููุงุฑูุง.
**ุงูุญู:**
- ูููุง ุจุชุซุจูุช ููุชุจุฉ `pybreaker` ูู `order-service`.
- ุฃุถููุง **ููุทุฉ ุงุชุตุงู ูุชุฒุงููุฉ (Synchronous Endpoint)** ุฌุฏูุฏุฉ ูู `payment-service` (`/api/payments/process`) ููุชุญูู ุงูููุฑู ูู ุงูุฏูุน.
- ูููุง ุจุชุบููู ุงุณุชุฏุนุงุก ุงูุฏูุน ุจู `Circuit Breaker`.
- **ุขููุฉ ุงูุนูู:** ุฅุฐุง ูุดูุช 50% ูู ุทูุจุงุช ุงูุฏูุนุ ุชูุชุญ ุงูุฏุงุฆุฑุฉ ูุชุชููู ุฎุฏูุฉ ุงูุทูุจุงุช ุนู ุฅุฑุณุงู ุทูุจุงุช ููุฏูุน ููุฏุฉ 30 ุซุงููุฉ.
- **ุงูุฎุทุฉ ุงูุจุฏููุฉ (Fallback):** ูู ุญุงู ูุชุญ ุงูุฏุงุฆุฑุฉ ุฃู ูุดู ุงูุงุชุตุงูุ ูุง ูุฑูุถ ุงูุทูุจุ ุจู ูููู ุจุฅุฑุณุงู ุญุฏุซ `order.created` ุฅูู RabbitMQ ููุชู ูุนุงูุฌุฉ ุงูุฏูุน ูุงุญูุงู (Asynchronous) ุนูุฏูุง ุชุนูุฏ ุงูุฎุฏูุฉ ููุนูู.

## 2. ุฅุนุงุฏุฉ ุงููุญุงููุฉ (Retry Mechanism) ๐
**ุงููุดููุฉ:** ูุฏ ุชูุดู ุจุนุถ ุงูุงุชุตุงูุงุช ุจุณุจุจ ูุดุงูู ูุคูุชุฉ ูู ุงูุดุจูุฉ (Network Blips).
**ุงูุญู:**
- ุงุณุชุฎุฏููุง ููุชุจุฉ `tenacity` ูู `order-service`.
- ูููุง ุจุชุบููู ุงูุงุชุตุงูุงุช ุจู `customer-service` ู `inventory-service` ุจูุฒุฎุฑู (Decorator) ูุฅุนุงุฏุฉ ุงููุญุงููุฉ.
- **ุงูุฅุนุฏุงุฏุงุช:**
    - 3 ูุญุงููุงุช ูุญุฏ ุฃูุตู.
    - ุงูุชุธุงุฑ ุชุตุงุนุฏู (Exponential Backoff): ุซุงููุฉุ ุซุงููุชููุ 4 ุซูุงูู.
    - ุฅุนุงุฏุฉ ุงููุญุงููุฉ ููุท ุนูุฏ ุฃุฎุทุงุก ุงูุดุจูุฉ ุฃู ุงูุฎุงุฏู (ููุณ ุนูุฏ ุฃุฎุทุงุก 404 ุฃู 400).

## 3. ุงูููู ุงูุฒูููุฉ (Timeouts) โฑ๏ธ
**ุงููุดููุฉ:** ุงูุชุธุงุฑ ุงุณุชุฌุงุจุฉ ุฎุฏูุฉ ูุชูููุฉ ูุฏ ูุนูู ุงููุธุงู ููุฃุจุฏ.
**ุงูุญู:**
- ุฃุถููุง ูููุฉ ุฒูููุฉ (`timeout`) ููู ุทูุจ HTTP ุฎุงุฑุฌู.
- `3 ุซูุงูู` ูุฎุฏูุงุช ุงูุนููุงุก ูุงููุฎุฒูู.
- `5 ุซูุงูู` ูุฎุฏูุฉ ุงูุฏูุน.

## 4. ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช (Rate Limiting) ๐ฆ
**ุงููุดููุฉ:** ุญูุงูุฉ ุงููุธุงู ูู ุงูุฅุบุฑุงู ุจุงูุทูุจุงุช (DDoS) ุฃู ุงูุงุณุชุฎุฏุงู ุงูููุฑุท.
**ุงูุญู:**
- ุงุณุชุฎุฏููุง ููุชุจุฉ `Flask-Limiter` ูู `api-gateway`.
- **ุงููููุฏ ุงููุทุจูุฉ:**
    - **ุนุงู:** 100 ุทูุจ ููู 15 ุฏูููุฉ ููู IP.
    - **ุฅูุดุงุก ุงูุทูุจุงุช:** 10 ุทูุจุงุช ูู ุงูุฏูููุฉ.
    - **ูุนุงูุฌุฉ ุงูุฏูุน:** 5 ุทูุจุงุช ูู ุงูุฏูููุฉ.
- ุนูุฏ ุชุฌุงูุฒ ุงูุญุฏุ ูุนูุฏ ุงููุธุงู ุจู `429 Too Many Requests`.

---

## ููููุฉ ุงูุงุฎุชุจุงุฑ ๐งช

ููุฏ ููุช ุจุฅูุดุงุก ููู `resilience_test.py` ูุงุฎุชุจุงุฑ ูุฐู ุงูุฎุตุงุฆุต ุชููุงุฆูุงู.

### ุชุดุบูู ุงูุงุฎุชุจุงุฑ:
ุชุฃูุฏ ูู ุฃู ุงูุฎุฏูุงุช ุชุนููุ ุซู ููุฐ ุงูุฃูุฑ:
```bash
python3 resilience_test.py
```

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ:
1. **Rate Limiting:** ุณูููู ุงูุณูุฑุจุช ุจุฅุฑุณุงู 15 ุทูุจ ุฅูุดุงุก ุทูุจ (Order) ุจุณุฑุนุฉ. ูุฌุจ ุฃู ุชูุฌุญ ุฃูู 10 ุทูุจุงุช ูุชูุดู ุงูุจููุฉ ุจู `429`.
2. **Circuit Breaker:** (ูุชุทูุจ ุชุฏุฎูุงู ูุฏููุงู)
    - ุฃููู ุฎุฏูุฉ ุงูุฏูุน: `docker-compose stop payment-service`
    - ุฃุฑุณู ุทูุจุงุช ุฌุฏูุฏุฉ.
    - ุณุชูุงุญุธ ูู ุงูุณุฌูุงุช (Logs) ุฃู ุงููุธุงู ุชุญูู ุชููุงุฆูุงู ูููุนุงูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ (Fallback) ุจุฏูุงู ูู ุงููุดู.


